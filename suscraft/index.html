<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8" />
<title>SusCraft</title>

<script src="https://cdn.tailwindcss.com"></script>
<script src="https://unpkg.com/three@0.160.0/build/three.min.js"></script>
<script src="https://unpkg.com/three@0.160.0/examples/js/controls/PointerLockControls.js"></script>

<style>
body{
  margin:0;
  background:#0b0f1a;
  overflow:hidden;
  font-family:sans-serif;
  color:white;
}

/* ðŸš¨ CRITICAL FIX */
canvas{
  position:fixed;
  inset:0;
  z-index:0;
  pointer-events:none; /* prevents click stealing */
}

/* UI always above */
.ui{
  position:fixed;
  z-index:10;
}

/* menu */
#menu{
  inset:0;
  display:flex;
  align-items:center;
  justify-content:center;
  background:rgba(0,0,0,.85);
}

/* button */
.btn{
  background:#2563eb;
  padding:14px 24px;
  border-radius:12px;
  font-weight:700;
  cursor:pointer;
}
</style>
</head>

<body>

<!-- ===== MENU ===== -->
<div id="menu" class="ui">
  <button id="play" class="btn">Play</button>
</div>

<script>
/* ======================
   THREE
====================== */

const scene = new THREE.Scene();

const camera = new THREE.PerspectiveCamera(75,innerWidth/innerHeight,0.1,1000);
camera.position.set(0,3,8);

const renderer = new THREE.WebGLRenderer();
renderer.setSize(innerWidth,innerHeight);
document.body.appendChild(renderer.domElement);

/* pointer lock only on canvas */
const controls = new THREE.PointerLockControls(camera, renderer.domElement);
scene.add(controls.getObject());

/* ======================
   SIMPLE FLOOR
====================== */

const geo = new THREE.BoxGeometry(1,1,1);
const mat = new THREE.MeshStandardMaterial({color:0x1e293b});

for(let x=-20;x<20;x++){
 for(let z=-20;z<20;z++){
  const cube=new THREE.Mesh(geo,mat);
  cube.position.set(x,0,z);
  scene.add(cube);
 }
}

const light=new THREE.DirectionalLight(0xffffff,1);
light.position.set(10,20,10);
scene.add(light);

/* ======================
   MOVEMENT
====================== */

const keys={};

onkeydown=e=>keys[e.code]=true;
onkeyup=e=>keys[e.code]=false;

function move(){
 const s=0.15;
 if(keys.KeyW) controls.moveForward(s);
 if(keys.KeyS) controls.moveForward(-s);
 if(keys.KeyA) controls.moveRight(-s);
 if(keys.KeyD) controls.moveRight(s);
}

/* ======================
   PLAY BUTTON
====================== */

const play=document.getElementById("play");

play.onclick=()=>{

  /* hide menu */
  document.getElementById("menu").style.display="none";

  /* allow canvas to receive mouse */
  renderer.domElement.style.pointerEvents="auto";

  /* lock */
  controls.lock();
};

/* ======================
   LOOP
====================== */

function animate(){
 requestAnimationFrame(animate);
 move();
 renderer.render(scene,camera);
}
animate();
</script>

</body>
</html>
