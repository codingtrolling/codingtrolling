<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0"/>

<title>codingtrolling // SusCraft</title>

<script src="https://cdn.tailwindcss.com"></script>
<script src="https://unpkg.com/three@0.160.0/build/three.min.js"></script>
<script src="https://unpkg.com/three@0.160.0/examples/js/controls/PointerLockControls.js"></script>

<style>
body{
  margin:0;
  overflow:hidden;
  background:#0b0f1a;
  font-family:sans-serif;
  color:#e2e8f0;
}

/* ===== canvas behind UI ===== */
canvas{
  position:fixed;
  inset:0;
  z-index:0;
}

/* ===== UI always above ===== */
.ui{
  position:fixed;
  z-index:10;
}

/* menu */
#menu{
  inset:0;
  display:flex;
  align-items:center;
  justify-content:center;
  background:rgba(0,0,0,.85);
  backdrop-filter:blur(8px);
}

/* button */
.btn{
  background:#2563eb;
  padding:12px 20px;
  border-radius:12px;
  font-weight:700;
  cursor:pointer;
}

/* inventory */
#inventory{
  bottom:10px;
  left:50%;
  transform:translateX(-50%);
  display:none;
  gap:6px;
}

.slot{
  width:40px;
  height:40px;
  border-radius:10px;
  border:2px solid #1e293b;
  cursor:pointer;
}
.slot.active{
  border-color:#3b82f6;
}
</style>
</head>

<body>

<!-- ===== MENU ===== -->
<div id="menu" class="ui">
  <div class="bg-slate-900 border border-slate-700 p-8 rounded-3xl text-center">
    <h1 class="text-3xl font-black mb-4">
      Sus<span class="text-blue-500">Craft</span>
    </h1>

    <!-- THIS BUTTON NOW 100% WORKS -->
    <button id="playBtn" class="btn w-full">
      Play
    </button>
  </div>
</div>

<!-- inventory -->
<div id="inventory" class="ui flex"></div>

<script>
/* ======================
   BASIC SETUP
====================== */

const scene = new THREE.Scene();

const camera = new THREE.PerspectiveCamera(75,innerWidth/innerHeight,0.1,1000);
camera.position.set(0,5,10);

const renderer = new THREE.WebGLRenderer({antialias:true});
renderer.setSize(innerWidth,innerHeight);
document.body.appendChild(renderer.domElement);

/* ðŸš¨ IMPORTANT FIX HERE */
const controls = new THREE.PointerLockControls(camera, renderer.domElement);

scene.add(controls.getObject());

window.onresize=()=>{
 camera.aspect=innerWidth/innerHeight;
 camera.updateProjectionMatrix();
 renderer.setSize(innerWidth,innerHeight);
};

/* ======================
   LIGHT
====================== */

const light = new THREE.DirectionalLight(0xffffff,1);
light.position.set(10,20,10);
scene.add(light);

/* ======================
   SIMPLE BLOCK WORLD
====================== */

const geo = new THREE.BoxGeometry(1,1,1);
const mat = new THREE.MeshStandardMaterial({color:0x1e293b});

for(let x=-20;x<20;x++){
 for(let z=-20;z<20;z++){
   const cube = new THREE.Mesh(geo,mat);
   cube.position.set(x,0,z);
   scene.add(cube);
 }
}

/* ======================
   INVENTORY UI
====================== */

const inv = document.getElementById("inventory");

for(let i=0;i<4;i++){
 const s=document.createElement("div");
 s.className="slot";
 inv.appendChild(s);
}

/* ======================
   MOVEMENT
====================== */

const keys={};

onkeydown=e=>keys[e.code]=true;
onkeyup=e=>keys[e.code]=false;

function move(){
 const s=0.12;

 if(keys.KeyW) controls.moveForward(s);
 if(keys.KeyS) controls.moveForward(-s);
 if(keys.KeyA) controls.moveRight(-s);
 if(keys.KeyD) controls.moveRight(s);
}

/* ======================
   PLAY BUTTON (FIXED)
====================== */

const menu = document.getElementById("menu");

document.getElementById("playBtn").onclick = () => {
  menu.style.display = "none";
  inv.style.display = "flex";

  /* pointer lock ONLY after click */
  controls.lock();
};

/* ======================
   LOOP
====================== */

function animate(){
 requestAnimationFrame(animate);
 move();
 renderer.render(scene,camera);
}
animate();
</script>

</body>
</html>
